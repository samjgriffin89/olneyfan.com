<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Sam J Griffin | Adding a Media Item to the Sitecore Media Library</title>
    <meta name="description" content="I am Sam Griffin, a full stack developer currently working at Cardfree,building out RESTful services that supports our mobile apps and customer portal.  For the most part I am working in .NET using Web API, but am becoming more immersed in RoR and grails.
" >
    <meta name="google-site-verification" content="cT3CHL7PrHfUex3GIuLkyjnk-deuZyedUYGqJGOKGEc" />

    <link rel="stylesheet" href="/css/main.css">
    <link rel="alternate" type="application/rss+xml" title="Your awesome title" href="/feed.xml">
  </head>
  <body>
    <div id="wrapper" class="wrapper">
      
      <header class="header">
  <hgroup>
  <h1>
  <a href="/">Sam J Griffin</a>
  </h1>
  <h2>
  <a href="/">Full Stack Developer</a>
  </h2>
  </hgroup>
  <nav id="primaryNav" class="navigation">
    <ul>
      <li>
        <a href="/travel">Travel</a>
      </li>
      <li>
        <a href="/dev-posts">Tech & Coding</a>
      </li>
      <li>
        <a href="https://github.com/samjgriffin89">Projects</a>
      </li>
      <li>
        <a href="https://gist.github.com/samjgriffin89">Code Snippets</a>
      </li>
    </ul>
  </nav>
</header>

      <section class="main-content">
      	<section class="post-wrapper">
	<article class="post">
		<hgroup>
			<div class="post-title">
				<h3>Adding a Media Item to the Sitecore Media Library</h3>
				
			</div>
			<h5>December 21, 2012</h5>
		</hgroup>
		<p>
		<p>To upload a file to the Sitecore media library is a fairly simple task. There are three things you need to have: the file path to the file you want to upload, the target path in Sitecore where you want the item to live, and the database you want to upload it to. To do this, you can put together a function, let’s call it UploadFile:</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">private</span> <span class="kt">string</span> <span class="nf">UploadFile</span><span class="p">(</span><span class="kt">string</span> <span class="n">file_path</span><span class="p">,</span> <span class="kt">string</span> <span class="n">target_path</span><span class="p">,</span> <span class="n">Database</span> <span class="n">db</span><span class="p">)</span> <span class="p">{</span>

     <span class="k">using</span> <span class="p">(</span><span class="k">new</span> <span class="nf">SecurityDisabler</span><span class="p">())</span> <span class="p">{</span>
          <span class="n">MediaCreatorOptions</span> <span class="n">mco</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MediaCreatorOptions</span><span class="p">();</span>
          <span class="n">mco</span><span class="p">.</span><span class="n">Database</span> <span class="p">=</span> <span class="n">db</span><span class="p">;</span>
          <span class="n">mco</span><span class="p">.</span><span class="n">Language</span> <span class="p">=</span> <span class="n">Sitecore</span><span class="p">.</span><span class="n">Context</span><span class="p">.</span><span class="n">Language</span><span class="p">;</span>
          <span class="n">mco</span><span class="p">.</span><span class="n">Versioned</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
          <span class="n">mco</span><span class="p">.</span><span class="n">Destination</span> <span class="p">=</span> <span class="n">target_path</span><span class="p">;</span>

          <span class="c1">//now create the media item
</span>          <span class="n">MediaCreator</span> <span class="n">creator</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MediaCreator</span><span class="p">();</span>
          <span class="n">MediaItem</span> <span class="n">mediaItem</span> <span class="p">=</span> <span class="n">creator</span><span class="p">.</span><span class="nf">CreateFromFile</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">mco</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="k">return</span> <span class="n">mediaItem</span><span class="p">.</span><span class="n">ID</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>

<p>Let’s step through this function line by line to make sure you fully understand what is going on here. First you may note the <strong>SecurityDisabler</strong>. This is to get around any pesky security issues that Sitecore may throw your way. One of the most important steps is setting up the <strong>MediaCreatorOptions</strong>. This is where you will set the database you want the item to go in, the destination of the item (item path), and other options like language or it if will be versioned or not.</p>

<p>It is important to note that if you are setting the Database option to the web database, you will need to clear the Sitecore cache in order to see the items in the tree. Normally when you publish an item from the master to web, the cache is automatically cleared; however, since you will be directly creating the item in the web database, you by-pass the cache clearing the publish action normally triggers.</p>

<p>If you do not know how to clear the Sitecore cache, simply go to this page: <em>http://(your-host-name)/sitecore/admin/cache.aspx</em> and login with your credentials. You will be given a display with the current cache information and two buttons at the top. Click on the “clear” button, which as you suspected, clears the cache.</p>

<p>Anyway, back to creating a media item. The next step is to create and instance of the <strong>MediaCreator</strong>, which is what we need to actually create the media item from the file. All you need to do is pass it the full file path of the file you are uploading and the media creator options and it will return your new media item.</p>

<p>Happy coding!</p>

		</p>	
		<p>
			<strong>Tags:</strong>
			.NET,C#
		</p>
		<a href="/posts">Back to Posts</a>
	</article>
	<div class="sidebar">
	<!-- <h4>Search</h4>
	<div class="posts-search">
		<input type="text" placeholder="Search Posts" />
		<button class="btn primary-btn">Submit</button>
		
		<a class="clear-results" href="/posts">Clear Results</a>
	</div> -->
	<h4>About the Author</h4>
	<div class="about--side">
		<p>I am a senior .NET engineer currently working at <a href="http://www.cardfree.com">CARDFREE</a> building out RESTful services to supports our mobile and web apps. My focus currently is around scalability, security, and ensuring our solutions are maintainable.</p>

<p>Originally from Boston, but have been living in Denver for several years now. In my spare time I try to keep pace with my energentic golden, hike and ski, and occassionally post something interesting.</p>
	</div>
</div>
</section>
      </section>
    </div>

    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24433484-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>