<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Sam J Griffin | Removing references to the 'Master' database</title>
    <meta property="og:title" content="Sam J Griffin | Engineer & Kid at Heart" />
    <meta property="og:description" content="I'm an engineer. I'm a kid at heart. I enjoy solving complex problems like scalability of applications, and also sledding down sand dunes at 40mph." />
    <meta property="og:image" content="https://samjgriffin.com/images/me_at_the_dunes.jpg" />

    <meta name="description" content="I'm an engineer. I'm a kid at heart. I enjoy solving complex problems like scalability of applications, and also sledding down sand dunes at 40mph." >
    <meta name="google-site-verification" content="cT3CHL7PrHfUex3GIuLkyjnk-deuZyedUYGqJGOKGEc" />

    <link rel="stylesheet" href="/css/main.css">
    <link rel="alternate" type="application/rss+xml" title="Your awesome title" href="/feed.xml">
  </head>
  <body>
    <div id="wrapper" class="wrapper">
      
      <header class="header">
  <hgroup>
  <h1>
  <a href="/">Sam J Griffin</a>
  </h1>
  <h2>
  <a href="/">Engineer & Kid at Heart</a>
  </h2>
  </hgroup>
  <nav id="primaryNav" class="navigation">
    <ul>
      <li>
        <a href="/travel">Travel</a>
      </li>
      <li>
        <a href="/dev-posts">Tech & Coding</a>
      </li>
      <li>
        <a href="https://github.com/samjgriffin89">Projects</a>
      </li>
      <li>
        <a href="https://gist.github.com/samjgriffin89">Code Snippets</a>
      </li>
    </ul>
  </nav>
</header>

      <section class="main-content">
      	<section class="post-wrapper">
	<article class="post">
		<hgroup>
			<div class="post-title">
				<h3>Removing references to the 'Master' database</h3>
				
				<h4>Scaling your Sitecore site for Production</h4>
				
			</div>
			<h5>October 16, 2012</h5>
		</hgroup>
		<p>
		<p>If you are preparing your Sitecore environment for production and need to remove references to your Master database, there are two ways you can do it.The first was is simply through including another config file that will make all the changes for you. The other was is to manually go through your web.config and a couple other files and remove all the references yourself. Personally, I like the second method, because it ends up with a cleaner solution, but the first option is definitely appealing since it is so easy.</p>

<p>For the first and easy method, all you need to do is download this file: <a href="http://sdn.sitecore.net/upload/sitecore6/64/switchmastertoweb.zip">Master-to-Web configuration file</a>
Once you download that file, unzip it and move the configuration file to your <em>/App_Config/Include</em> folder and comment out your Master database reference in your connection strings. That’s it for this method - see very easy.</p>

<p>The other method, manually removing everything, is done by removing all of your references to the Master database. Here is how you do it:</p>

<p>In the <strong>Web.config</strong> file:</p>

<p>In the <strong>sites</strong> section:
Change the <strong>content</strong> attribute of the <strong>shell</strong> and <strong>modules_shell</strong> site nodes from ‘master’ to ‘web’
If the <strong>testing</strong> site node is present, delete or comment it out
Next search for the <strong>connectionStringName</strong> attribute under the section. Change that attribute on the node from ‘master’ to ‘web’</p>

<p>For the next three changes, you can either comment out or delete these sections:
The ‘master’ node under the section
Under Search/Configuration/indexes/index/locations, remove or comment out the node.
Remove or comment out the <strong>Sitecore.Tasks.DatabaseAgent</strong> with the database parameter set to ‘master’
Now onto the next configuration file -&gt; In the <em>/App_Config/Include/Sitecore.WebDAV.config</em> file:</p>

<p>Under the <strong>Sitecore.Tasks.CleanupFDAObsoleteMediaData</strong> agent, delete or comment out the node.</p>

<p>Finally, remember to remove the references to the ‘master’ database from your connection strings files, and then you are done. Now that took longer then the other method, but you web.config will be less cluttered and won’t have any confusing ‘master’ references stuck in there either. Hope this helps, happy coding!</p>


		</p>	
		<p>
			<strong>Tags:</strong>
			Sitecore,Scalability
		</p>
		<a href="/posts">Back to Posts</a>
	</article>
	<div class="sidebar">
	<!-- <h4>Search</h4>
	<div class="posts-search">
		<input type="text" placeholder="Search Posts" />
		<button class="btn primary-btn">Submit</button>
		
		<a class="clear-results" href="/posts">Clear Results</a>
	</div> -->
	<h4>About the Author</h4>
	<div class="about--side">
		<p>I am a senior .NET engineer currently working at <a href="http://www.cardfree.com">CARDFREE</a> building out RESTful services to supports our mobile and web apps. My focus currently is around scalability, security, and ensuring our solutions are maintainable.</p>

<p>Originally from Boston, but have been living in Denver for several years now. In my spare time I try to keep pace with my energentic golden, hike and ski, and occassionally post something interesting.</p>
	</div>
</div>
</section>
      </section>
    </div>

    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24433484-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>